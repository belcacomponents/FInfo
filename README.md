# FInfo
Fileinfo for Dios CMS

Расчетное (высчитанное) свойство/значение | Calculated property/value
Виртуальное свойство/значение | Virtual property/value
Метод получения данных

Fileinfo::file(string $fileName, mixed $methods = [], mixed $options = [])

$fileName - путь к файлу.

$methods - методы получения информации о файле. Содержит одно или массив значений необходимых данных. В качестве значений выступают константы, имена методов (абстрактоного типа информации), имена классов с именем метода, имя типа с именем метода.

$options - опции получения информации о файле. В зависимости от реализации получения данных,
они могут быть использованы или проигнорированы. В зависимости от типа значений, опции могут
задаваться конкретному классу/методу или передаваться всем обработчикам.

Одинаковые имена методов могут присутствовать у обработчиков разных типов файлов и
у одинаковых типов файлов.

Например, image.jpg, image.png, image.gif, image.bmp могут иметь функцию определения цвета.
В принципе, если это возможно, то и file.pdf может иметь такую реализацию.
Для каждого типа файла будет вызван соответствующий класс обработчика и могут быть к нему
переданны дополнительные параметры.

Как работает функция?

Передается путь к файлу, методы и опции. С помощью внутренее реализации, определяется
обработчик файла, если не указано другое.
Обработчик файла определяется исходя из: наличия функции-обработчика, типа файла, возможности его обработки.

// Массив обработчиков и вызываемых функций

'tool' => \Belca\FInfoTools::class, - общий инструмент для всех типов файлов
'colors' => [
  \Belca\FInfoColors::class,
  \Belca\FInfoMixedColors::class
],
'time' => [
  'audio' => [ // для аудиофайлов
    \Belca\FInfoMP3::class, // для файлов с mime mp3
    \Belca\FInfoWAV::class, // для файлов с mime wav
    \Belca\FInfoOGG::class, // для файлов с mime ogg
  ],
  'video' => [ // для видеофайлов
    'avi' => [ // для файлов AVI
      \Belca\FInfoAVI::class, // для файлов с mime avi
      \Belca\FInfoMSAVI::class, // для файлов с mime msavi
    ],
    'video/x-matroska' => \Belca\FInfoMatroska::class, // для файлов с mime matroska
  ],
  'gif' => \Belca\FInfoGifTime::class, // для файлов с расширением gif
  'presentation' => \Belca\FInfoPPT::class, // для презентаций, в частности будет обработан только PPT
],

// Константы - содержат имена вызываемых методов с указанием класса, типа или без него
const IMAGE_HUMAN_COLOR = 'color'



Fileinfo::file('/path/to/filename') - вернет всю или основную информацию
Fileinfo::file('/path/to/filename', IMAGE_HUMAN_COLOR) - вернет информацию о среднем цвете изображения для человека, если файл является поддерживаемым изображением
Fileinfo::file('/path/to/filename', [IMAGE_HUMAN_COLOR, IMAGE_COLORS, IMAGE_ORINTATION, 'tool', 'geo']) - вернет массив с ключами запроса со значениями: средний цвет для человека, частовстречаемые цвета изображения, ориентация изображения, фотокамера или инструмент
Fileinfo::file('/path/to/filename', ['ImageInfo::color']) - получает информацию о файле, с помощью конкретный файл и метод. Данный подход не желателен, но возможен, когда одинаковые методы используются в разных классах и дают разный результат

Fileinfo::getClasses() - возвращает список используемых классов
Fileinfo::getClassByMethodAndMime('tool', 'mime/type') - возвращает первый подходящий класс для извлечения данных о файле по указанному методу и типу
/*Fileinfo::getClassByConstant(CONSTANT) - возвращает первый найденный класс для извлечения данных по указанной константе*/
Fileinfo::getClassesByMethod('colors') - возвращает список классов обрабатывающих данный метод
Fileinfo::getClassesByMethod('colors', 'mime/type') - возвращает список классов обрабатывающих данный метод и указанный тип файла


Fileinfo::addClass('className') - добавляет новый класс-обработчик
При добавлении класса-обработчика извлекается из него обрабатываемые mime-типы, если указаны, используемые методы и их алиасы
